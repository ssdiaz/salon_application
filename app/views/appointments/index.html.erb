<h3>Appointments Calendar</h3>
<p><b>Total Appointments per Stylist:</b><br>
<% @stylists.each do |stylist| %>
  <%= stylist.name %> (id: <%= stylist.id %>) | 
  Total: <%= @appointments.filter_by_stylist(stylist.id).count %><br>
<% end %></p>
<p><b>Total Apps count: <%= @appointments.count%></b><br>
<% @appointments.each_with_index do |app, index| %>
  <%= index +1 %>.
  <%= link_to "Appointment #: #{app.id}", appointment_path(app) %>
  Stylist name: <%= display_stylist_name(app) %> (id: <%= app.stylist_id %>)
  <br>
<% end %> </p>




<%= form_tag({}, :method => 'get') do  %>
  <%= label_tag :stylist_id, 'Choose a Stylist to Filter:' %><br>  
  <%= select_tag :stylist_id, options_from_collection_for_select(@stylists, :id, :name, params[:stylist_id]), include_blank: "All" %>
  <%= submit_tag "Select" %>
<% end %>

<br>

<%# <%= month_calendar(attribute: :start_date, end_attribute: :end_date) do |date| %> 
<%= month_calendar(events: @appointments) do |date, appointments| %>
  <%= date.day %> 

  <% 9.upto(20).each do |hour| %>
    <div>
      <b><%= Time.parse("#{hour}:00").strftime("%l %p") %></b>

      <% appointments.each do |appointment|  %>
        <% if appointment.start_time.strftime("%H").to_i  == hour %> 
          <div>
            <%= link_to "Appointment #: #{appointment.id}", appointment_path(appointment) %><br>
            Stylist: <%= display_stylist_name(appointment) %> (id: <%= appointment.stylist_id %>)<br>
            Price: $<%= appointment.price %><br>
            Start Time: <%= appointment.start_time %><br>
              TIME: <%= appointment.start_time.strftime("%l:%M %P") %><br>
              DATE: <%= appointment.start_time.strftime("%F") %><br>
            Service: 
            <% appointment.services.each do |service| %>
              <li><%= service.name %></li>
            <% end %>
          </div>
          TIME in select: <%= appointment.start_time.strftime("%H").to_i  %><br>
          HOUR in select: <%= hour %><br>
        <% end %> 
      <% end %>

    </div>
  <% end %>

<% end %>

